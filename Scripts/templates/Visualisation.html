<!DOCTYPE html>
<html lang="en">
<head>

    <p><title>DBL HTI + Webtech</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <p style="color: blue;"><title>DBL HTI + Webtech</title>
    <link rel="stylesheet" type="text/css" href={{ url_for('static', filename='DBL.css') }}>
    <script src="https://d3js.org/d3.v3.min.js"></script>

</head>
<body style="background-color: #00b6da">
    <div class = "Background">
        <h1>Data Visualisation</h1>
    </div>
    <div>
    <a href="Indexpage.html" >Main page</a>

    </div>


    
        <form method = "POST" action="{{ url_for("upload_file") }}" name="upload" enctype="multipart/form-data">
            <input type="file" name="file" />
            <input type="text" name="fileName">
            <input type="submit" name="upload" value="Upload" />
        </form>

        <div>

            <form method = "POST" action="{{ url_for("getData") }}" enctype="multipart/form-data">
                <p> Choose a file to visualise </p>
                <select id="File-Dropdown" name="File-Dropdown"></select>
                <input type="submit" name="visualize" value="Visualize" />
            </form>
	<div id="chart"></div>
        </div>

    <script type="text/javascript">
        var filesnames = {{ Arraynames|tojson }};
        var myData = {{ data or [0,0,0]}}
window.onload = initPage();
//you can only load one function on window.onload so we needed a function that executes multiple
function initPage() {
    ShowDropdown();
    ChartLoad();
    ForceDirectedLoad();
}

function ShowDropdown() {

    //Get names array from flask and create a dropdown html element
    var select = document.getElementById("File-Dropdown");

    //Create for every name in the array a new dropdown element and add it to the menu
    for (let i = 0; i < filesnames.length; i++){
        var opt = filesnames[i];
        var el = document.createElement("option");
        el.textContent = opt;
        el.value = opt;
        select.appendChild(el);
    }


}
    </script>
    <script type="text/javascript" src="MailPerYear.js"></script>
    <script type="text/javascript" src="NodeLink.js"></script>
    <script type="text/javascript" src="Matrix.js"></script>

        <hr />
        <div id="dvCSV">
        </div>
    </body>
</html>

